{

// test for YaPI::Samba::EditSAMConfiguration()
// $Id$
// testedfiles: Samba.ycp Service.ycp SambaServer.ycp Ldap.ycp

    include "testsuite.ycp";

    TESTSUITE_INIT( [ 
	$[ 
	    "target" : $[ "tmpdir" : "/tmp" ],  
	    "etc" : $[
		"smb" : $[
		    "value" : $[
			"global" : $[
			    "workgroup" : "Test",
			    "security" : "user",
			    "domain master" : "no",
			    "domain logons" : "no",
			    "local master" : "no",
			    "preferred master" : "yes",
			    "ldap suffix" : "dc=another",
			    "ldap admin dn" : "uid=fool,dc=another",
			    
			],
			"lp" : $[
			    "comment" : "testing printer",
			    "path" : "/var/spool/lp",
			    "printable" : "yes",
			]
		    ],
		    "section" : $[
			"lp" : $[],
		    ],
		    "section_type" : $[
			"lp" : 0,
		    ],
		],
		"printcap" : [],
	    ],
	    "passwd" : $[
		"passwd" : $[
		    "pluslines" : [],
		]
	    ],
	],
	$[],
	$[
    	    "target" : $[
        	"bash_output" : $[],
		"bash" : 1
    	    ],
	    "background" : $[
		"run_output" : true,
	    ],
	    "passwd" : $[
		"init" : true,
	    ],
	]
    ], nil );

    import "YaPI::Samba";

    DUMP(YaPI::Samba::EditSAMConfiguration( "ldapsam:ldap://localhost", 
    	$[ "ldap suffix" : "dc=test,dc=domain",
	    "ldap admin dn" : "uid=fool,dc=test,dc=domain",
	]
    ));
}
