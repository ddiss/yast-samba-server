{

// test for SambaServer::setRole
// $Id$
// testedfiles: Samba.ycp, SambaServer.ycp

    include "testsuite.ycp";

    TESTSUITE_INIT( [
        $[ "target" : $[ "tmpdir" : "/tmp" ] ],
        $[],
        $[
            "target" : $[
                "bash_output" : $[],
            ],
        ]
    ], nil );
    
    import "SambaServer";
    
    SambaServer::setRole( `pdc );
    DUMP(SambaServer::role);
    DUMP(SambaServer::modified);
    
    SambaServer::modified = false;
    SambaServer::setRole( `standalone );
    DUMP(SambaServer::role);
    // this time modified should be set
    DUMP(SambaServer::modified);

    SambaServer::setRole( `bdc );
    DUMP(SambaServer::role);
    DUMP(SambaServer::modified);

    SambaServer::setRole( `pdc );
    DUMP(SambaServer::role);
    DUMP(SambaServer::modified);
}
