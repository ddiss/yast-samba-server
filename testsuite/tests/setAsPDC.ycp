{

// test for SambaServer::setAsPDC()
// $Id$
// testedfiles: Samba.ycp SambaServer.ycp

    include "testsuite.ycp";
    
    TESTSUITE_INIT( [
        $[ "target" : $[ "tmpdir" : "/tmp" ] ],
        $[],
        $[
            "target" : $[
                "bash_output" : $[],
            ],
        ]
    ], nil );
    
    import "Samba";
    import "SambaServer";
    
    DUMP(SambaServer::role);
    DUMP(Samba::security);
    DUMP( sformat( "Domain logons: %1", SambaServer::global_config["domain logons"]:nil) );
    DUMP( sformat( "Domain master: %1", SambaServer::domain_master) );
    DUMP( sformat( "Local master: %1", SambaServer::global_config["local master"]:nil) );
    DUMP( sformat( "Preferred master: %1", SambaServer::preferred_master) );
    
    Samba::modified = false;
    TEST( ``( SambaServer::setAsPDC() ), [], nil );

    DUMP(SambaServer::modified);
    DUMP(SambaServer::role);
    DUMP(Samba::security);

    DUMP( sformat( "Domain logons: %1", SambaServer::global_config["domain logons"]:nil) );
    DUMP( sformat( "Domain master: %1", SambaServer::domain_master) );
    DUMP( sformat( "Local master: %1", SambaServer::global_config["local master"]:nil) );
    DUMP( sformat( "Preferred master: %1", SambaServer::preferred_master) );
}
