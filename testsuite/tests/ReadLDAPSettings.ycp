{

// test for SambaServer::ReadLDAPsettings()
// $Id$
// testedfiles: Samba.ycp, SambaServer.ycp

    include "testsuite.ycp";

    TESTSUITE_INIT([
            $[
                "target" : $[
                    "tmpdir" : "/tmp"
                ]
            ],
            $[],
            $[
                "target" : $[
                    "bash_output" : $[]
                ]
            ]
        ],nil);    
    import "SambaServer";
    
    TEST( ``( SambaServer::ReadLDAPSettings() ), [
        // read map
	$[
            "etc": $[ "smb" : $[ "value" : $[ "global" :$[
		"ldap suffix" : "dc=example,dc=com",
		"ldap admin dn" : "uid=root,dc=example,dc=com",
            ] ] ] ] ,
	    "passwd" : $[ "init" : true, "passwd" : $[ "pluslines" : [] ] ], 
        ],
	$[],
	$[ "passwd" : $[ "init" : true, "passwd" : $[ "pluslines" : [] ] ] ]
    ], nil );
    
    DUMP( SambaServer::LDAP_admin_dn );
    DUMP( SambaServer::LDAP_suffix );
    DUMP( SambaServer::modified );
}
