{

// test for SambaServerPassdb::SetBackends
// $Id$

    include "testsuite.ycp";

    list rwe = [
            $[
                "target" : $[
                    "tmpdir" : "/tmp",
                    "size" : 0
                ]
            ],
            $[],
            $[
                "target" : $[
                    "bash_output" : $[]
                ]
            ]
        ];
    TESTSUITE_INIT(rwe, nil);
    import "SambaServerPassdb";
    
    SambaServerPassdb::SetBackends( ["smbpasswd"] );
    TEST( ``(SambaServerPassdb::GetBackends()), rwe, nil);
    TEST( ``(SambaServerPassdb::Modified()), rwe, nil);

    SambaServerPassdb::Write();   
 
    SambaServerPassdb::SetBackends( ["smbpasswd"] );
    TEST( ``(SambaServerPassdb::GetBackends()), rwe, nil);
    // this time modified should not be set - this does not work ATM
    TEST( ``(SambaServerPassdb::Modified()), rwe, nil);

    SambaServerPassdb::SetBackends( ["ldapsam:ldaps://ldap.example.com"] );
    TEST( ``(SambaServerPassdb::GetBackends ()), rwe, nil);
    // modified again
    TEST( ``(SambaServerPassdb::Modified()), rwe, nil);
}
