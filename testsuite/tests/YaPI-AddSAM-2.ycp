{

// test for YaPI::Samba::AddSAM()
// $Id$

    include "testsuite.ycp";

    TESTSUITE_INIT( [ 
	$[ 
	    "target" : $[ "tmpdir" : "/tmp" ],  
	    "etc" : $[
		"smb" : $[
		    "value" : $[
			"global" : $[
			    "workgroup" : "Test",
			    "security" : "user",
			    "domain master" : "no",
			    "domain logons" : "no",
			    "local master" : "no",
			    "preferred master" : "yes",
			    "passdb backend" : "smbpasswd ldapsam:ldap://localhost",
			],
			"lp" : $[
			    "comment" : "testing printer",
			    "path" : "/var/spool/lp",
			    "printable" : "yes",
			]
		    ],
		    "section" : $[
			"lp" : $[],
		    ],
		    "section_type" : $[
			"lp" : 0,
		    ],
		],
		"printcap" : [],
	    ],
	    "passwd" : $[
		"passwd" : $[
		    "plusline" : "",
		]
	    ],
	],
	$[],
	$[
    	    "target" : $[
        	"bash_output" : $[],
		"bash" : 1
    	    ],
	    "background" : $[
		"run_output" : true,
	    ],
	    "passwd" : $[
		"init" : true,
	    ],
	]
    ], nil );

    import "YaPI::Samba";

    // add as non-default
    DUMP(YaPI::Samba::AddSAM( "smbpasswd:/var/lib/smbusers" , false));
}
