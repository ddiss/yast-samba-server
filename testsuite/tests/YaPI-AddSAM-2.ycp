{

// test for YaPI::Samba::AddSAM()
// $Id$

    include "testsuite.ycp";

    list rwe = [
            $[
                "passwd" : $[
                    "passwd" : $[
                        "plusline" : ""
                    ]
                ],
                "target" : $[
                    "tmpdir" : "/tmp",
                    "size" : 0
                ],
                "etc" : $[
                    "smb" : $[
                        "value_types" : $[
                            "global" : $[
                                "workgroup" : 0,
                                "domain master" : 0,
                                "security" : 0,
                                "passdb backend" : 0,
                                "preferred master" : 0,
                                "local master" : 0,
                                "domain logons" : 0
                            ],
                            "lp" : $[
                                "comment" : 0,
                                "printable" : 0,
                                "path" : 0
                            ]
                        ],
                        "section_types" : $[
                            "lp" : 0
                        ],
                        "value" : $[
                            "global" : $[
                                "workgroup" : "Test",
                                "domain master" : "no",
                                "security" : "user",
                                "preferred master" : "yes",
                                "passdb backend" : "smbpasswd ldapsam:ldap://localhost",
                                "domain logons" : "no",
                                "local master" : "no"
                            ],
                            "lp" : $[
                                "comment" : "testing printer",
                                "printable" : "yes",
                                "path" : "/var/spool/lp"
                            ]
                        ],
                        "section" : $[
                            "lp" : $[]
                        ]
                    ],
                    "printcap" : []
                ]
            ],
            $[],
            $[
                "passwd" : $[
                    "init" : true
                ],
                "target" : $[
                    "bash" : 1,
                    "bash_output" : $[]
                ],
                "background" : $[
                    "run_output" : true
                ]
            ]
        ];
    TESTSUITE_INIT(rwe, nil);
    import "YaPI::Samba";

    // add as non-default
    TEST( ``(YaPI::Samba::AddSAM( "smbpasswd:/var/lib/smbusers" , false)), rwe, nil);
}
