{

// test for Samba::EnableServer( boolean ) - enable/disable smb/nmb service
// $Id$

    include "testsuite.ycp";

    TESTSUITE_INIT( [
        $[ "target" : $[ "tmpdir" : "/tmp" ] ],
        $[],
        $[
            "target" : $[
                "bash_output" : $[],
            ],
        ]
    ], nil );
    
    import "YaPI::Samba";
    
    DUMP ("Disabled service");

    // disabled service
    TEST( ``( YaPI::Samba::GetServiceStatus() ), [ 
	$[ "init" : $[ "scripts" : $[ "exists" : true ] ] ],
	$[],
	$[ "target" :$[ "bash_output" : 
	    $[
		"exit" : 0,
	    ]
	] ]
    ], nil );

    DUMP ("Enabled service");

    // enabled service
    TEST( ``( YaPI::Samba::GetServiceStatus() ), [ 
	$[ 
	    "init" : $[ 
		"scripts" : $[ 
		    "exists" : true,
		    "runlevel" : $[
			"smbd" : $[
			    "start" : [ "2", "3", "5" ],
			],
			"nmbd" : $[
			    "start" : [ "2", "3", "5" ],
			],
		    ],
		],
	    ],
	    
	],
	$[],
	$[ "target" :$[ "bash_output" : 
	    $[
		"exit" : 0,
	    ]
	] ]
    ], nil );
}
