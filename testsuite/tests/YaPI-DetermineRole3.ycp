{

// test for SambaServer::DetermineRole() for BDC
// $Id$
// testedfiles: Samba.ycp Service.ycp SambaServer.ycp Ldap.ycp

    include "testsuite.ycp";

    list rwe = [
            $[
                "passwd" : $[
                    "passwd" : $[
                        "pluslines" : []
                    ]
                ],
                "target" : $[
                    "tmpdir" : "/tmp",
                    "size" : 0
                ],
                "etc" : $[
                    "smb" : $[
                        "value_type" : $[
                            "global" : $[
                                "workgroup" : 0,
                                "domain master" : 0,
                                "security" : 0,
                                "preferred master" : 0,
                                "domain logons" : 0,
                                "local master" : 0
                            ]
                        ],
                        "value" : $[
                            "global" : $[
                                "workgroup" : "Test",
                                "domain master" : "no",
                                "security" : "user",
                                "preferred master" : "yes",
                                "local master" : "yes",
                                "domain logons" : "yes"
                            ]
                        ]
                    ],
                    "printcap" : []
                ]
            ],
            $[],
            $[
                "passwd" : $[
                    "init" : true
                ],
                "target" : $[
                    "bash" : 1,
                    "bash_output" : $[]
                ],
                "background" : $[
                    "run_output" : true
                ]
            ]
        ];
    TESTSUITE_INIT(rwe, nil);
    import "YaPI::Samba";

    import "Mode";
    Mode::test = true;

    TEST( ``(YaPI::Samba::DetermineRole()), rwe, nil);
}
