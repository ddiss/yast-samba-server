{

// test for SambaServer::enablePrinters( enable )
// $Id$
// testedfiles: Samba.ycp SambaServer.ycp

    include "testsuite.ycp";
    
    import "Samba";

    list rwe = [
            $[
                "target" : $[
                    "tmpdir" : "/tmp",
                    "size" : 0
                ]
            ],
            $[],
            $[
                "target" : $[
                    "bash_output" : $[]
                ]
            ]
        ];
    TESTSUITE_INIT(rwe, nil);
    import "SambaServer";
    
    SambaServer::share_printers = false;
    SambaServer::shares[ "printers" ] = $[
   "comment": "All Printers",
   "path": "/var/tmp",
   "printable": true,
   "create mask": "0600",
   "browseable": false,
   "available": "yes",
   "guest ok": "no",
   "yast": true
    ];
    
    TEST( ``(SambaServer::share_printers), rwe, nil);
    TEST( ``(SambaServer::shares), rwe, nil);
    TEST( ``(SambaServer::modified), rwe, nil);
    
    Samba::modified = false;
    TEST( ``( SambaServer::enablePrinters(true) ), rwe, nil);

    TEST( ``(SambaServer::share_printers), rwe, nil);
    TEST( ``(SambaServer::shares), rwe, nil);
    TEST( ``(SambaServer::modified), rwe, nil);

    TEST( ``( SambaServer::enablePrinters(false) ), rwe, nil);

    TEST( ``(SambaServer::share_printers), rwe, nil);
    TEST( ``(SambaServer::shares), rwe, nil);
    TEST( ``(SambaServer::modified), rwe, nil);
}
