{

// test for YaPI::Samba::EnablePrinters()
// $Id$
// testedfiles: Samba.ycp Service.ycp SambaServer.ycp Ldap.ycp

    include "testsuite.ycp";

    list rwe = [
            $[
                "passwd" : $[
                    "passwd" : $[
                        "pluslines" : []
                    ]
                ],
                "target" : $[
                    "tmpdir" : "/tmp",
                    "size" : 0
                ],
                "etc" : $[
                    "smb" : $[
                        "value_type" : $[
                            "global" : $[
                                "ldap suffix" : 0,
                                "local master" : 0,
                                "workgroup" : 0,
                                "ldap admin dn" : 0,
                                "domain master" : 0,
                                "security" : 0,
                                "preferred master" : 0,
                                "domain logons" : 0
                            ],
                            "lp" : $[
                                "comment" : 0,
                                "printable" : 0,
                                "path" : 0
                            ]
                        ],
                        "section_type" : $[
                            "lp" : 0
                        ],
                        "value" : $[
                            "global" : $[
                                "ldap suffix" : "dc=test,dc=domain",
                                "local master" : "no",
                                "workgroup" : "Test",
                                "ldap admin dn" : "uid=fool,dc=test,dc=domain",
                                "domain master" : "no",
                                "security" : "user",
                                "preferred master" : "yes",
                                "domain logons" : "no"
                            ],
                            "lp" : $[
                                "comment" : "testing printer",
                                "printable" : "yes",
                                "path" : "/var/spool/lp"
                            ]
                        ],
                        "section" : $[
                            "lp" : $[]
                        ]
                    ],
                    "printcap" : []
                ]
            ],
            $[],
            $[
                "passwd" : $[
                    "init" : true
                ],
                "target" : $[
                    "bash" : 1,
                    "bash_output" : $[]
                ],
                "background" : $[
                    "run_output" : true
                ]
            ]
        ];
    TESTSUITE_INIT(rwe, nil);
    import "YaPI::Samba";

    TEST( ``(YaPI::Samba::GetSAMConfiguration( "ldapsam:ldap://localhost")), rwe, nil);
}
